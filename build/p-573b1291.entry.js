import{r as e,h as t,H as s}from"./p-2aa67f1c.js";import{I as n}from"./p-a4e3771c.js";function o(e,t,s){return function(e,t="Race",s="asc"){const n="asc"===s?1:-1;return e.sort(((e,s)=>e[t]>s[t]?n:-n))}(e,t,s)}const i=class{constructor(t){e(this,t),this.question=null,this.showNoResponse=!1,this.type=n.Choice,this.responses=[]}renderCandidates(e){return o(e,"Race").map((e=>t("dc-election-candidate",{photo:e.Photo,fullname:e.Candidate,office:e.Race})))}renderResponse(e,s=2){if("No Response"!==e.response){let i=e.response.replace(/^[0-9]\.\s+/,""),r="narrow";switch(this.type){case n.Choice:return r=s>3?"narrow":"grid",t("div",{class:"response-gallery"},t("dc-election-gallery",{appearance:r,candidates:o(e.candidates,"Race")},t("div",{class:"response"},i)));case n.Text:return t("div",{class:"response-quote"},t("dc-election-gallery",{appearance:r,candidates:o(e.candidates,"Race")}),t("div",{class:"response"},i));case n.Rank:case n.Option:const a=i.split("|");return i=t("ol",{class:"rank-options"},a.map((e=>t("li",{innerHTML:this.omitOptions(e)})))),t("div",{class:"response-rank"},t("dc-election-gallery",{appearance:r,candidates:o(e.candidates,"Race")}),t("div",{class:"response"},i))}}else if(this.showNoResponse){const s=e.candidates.map((e=>null==e?void 0:e.Candidate));return t("div",{class:"footnote"},"No response from ",o(s).join(", "))}}omitOptions(e){return e.replace(/\~([\w\s,-]+)\~/g,"<span class='omit'>$1</span>")}renderQuestion(e){let s=e.Question.replace(/_(.*)_/g,'<span class="preface">$1</span>');return t("div",{class:"question",innerHTML:s})}render(){return console.debug("dc-election-question",{question:this.question,responses:this.responses}),t(s,null,t("slot",null),this.renderQuestion(this.question),t("div",{class:`layout-${this.type.toLowerCase()}`},o(this.responses,"response","asc").map((e=>this.renderResponse(e,this.responses.length)))))}};i.style=':host{display:block;border-top:thin solid #444;margin-bottom:2em}.preface{font-weight:300;font-size:1em;display:block;margin-bottom:0.3em}.question{font-weight:700;font-size:1em;padding:1em 0}.response{font-weight:600;font-size:1em;padding:1em 0}.footnote{font-weight:300px;font-size:0.8em;font-style:italic;padding-top:0.5em}.layout-choice{display:grid;grid-gap:0.3em;grid-template-columns:repeat( auto-fit, minmax(400px, 1fr) )}.layout-choice .response{padding:0 0.3em;vertical-align:bottom}.response-gallery:not(:last-child){border-right:1px solid #AAA;padding-right:0.3em}.response-quote,.response-rank{display:grid;grid-template-columns:0.1fr 1fr;padding:1em 0;border-bottom:thin solid #DDD}.response-rank .response{font-weight:300;padding:0}.response-quote .response{font-weight:400;font-size:1em;padding:0.4em;font-style:oblique;quotes:"\\201C""\\201D""\\2018""\\2019"}.response-quote .response:before{content:open-quote;color:#ccc;font-size:3em;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em}.response-quote .response:after{content:close-quote;color:#ccc;font-size:3em;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em}.rank-options{padding:0;margin:0}.rank-options li{list-style:none;border:1px solid #CCC;padding:0.5em;margin-bottom:0.5em}.omit{text-decoration:line-through}.omit::after{display:inline-block;text-decoration:unset;content:"Won\'t pursue";font-weight:100;font-style:italic}';export{i as dc_election_question}