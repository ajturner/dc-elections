{"version":3,"sources":["node_modules/papaparse/papaparse.min.js","src/utils/response.ts","node_modules/@stencil/store/dist/index.mjs","src/utils/store.ts","src/utils/utils.ts"],"names":["e","t","module","exports","this","s","f","self","window","n","document","postMessage","o","test","location","protocol","a","h","b","parse","i","dynamicTyping","M","dynamicTypingFunction","transform","worker","WORKERS_SUPPORTED","r","URL","webkitURL","toString","BLOB_URL","createObjectURL","Blob","type","Worker","onmessage","_","id","userStep","step","userChunk","chunk","userComplete","complete","userError","error","input","config","workerId","download","l","p","readable","read","on","g","File","Object","c","stream","unparse","m","y","delimiter","BAD_DELIMITERS","filter","indexOf","length","quotes","Array","isArray","skipEmptyLines","newline","quoteChar","header","columns","Error","escapeChar","escapeFormulae","RegExp","j","JSON","u","keys","data","fields","meta","v","join","trim","d","push","constructor","Date","stringify","slice","replace","charAt","RECORD_SEP","String","fromCharCode","UNIT_SEP","BYTE_ORDER_MARK","NODE_STREAM_INPUT","LocalChunkSize","RemoteChunkSize","DefaultDelimiter","Parser","E","ParserHandle","NetworkStreamer","FileStreamer","StringStreamer","ReadableStreamStreamer","jQuery","fn","each","prop","toUpperCase","attr","toLowerCase","FileReader","files","file","inputElem","instanceConfig","extend","before","action","reason","name","splice","_handle","_finished","_completed","_halted","_input","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","errors","w","chunkSize","parseInt","streamer","_config","call","parseChunk","beforeFirstChunk","paused","aborted","cursor","substring","preview","results","WORKER_ID","finished","concat","_sendError","_readChunk","_chunkLoaded","XMLHttpRequest","withCredentials","onload","onerror","_chunkError","open","downloadRequestBody","downloadRequestHeaders","setRequestHeader","send","message","status","readyState","responseText","getResponseHeader","lastIndexOf","statusText","webkitSlice","mozSlice","FileReaderSync","Math","min","size","readAsText","encoding","target","result","pause","prototype","apply","arguments","resume","_streamData","_streamEnd","_streamError","_checkIsFinished","shift","_streamCleanUp","removeListener","pow","abort","k","transformHeader","forEach","map","parseFloat","code","row","split","comments","abs","successful","bestDelimiter","delimitersToGuess","getCharIndex","setTimeout","S","O","x","I","T","D","A","fastMode","L","F","z","C","R","index","substr","linebreak","truncated","terminate","create","ISurveyQuestionType","async","fetchCandidates","filename","fetch","text","parseConfig","parseFile","Papa.parse","parseData","response","reduce","candidateIndex","candidate","undefined","race","candidates","Race","Candidate","Website","fetchResponses","format","candidatesFile","candidatesText","responses","parseResponse","console","parseSurveyMonkeyQuestions","parseColumnQuestions","parseRowQuestions","debug","_parseFile","questions","questionColumnStart","responseRowStart","idColumn","nameColumn","websiteColumn","ancColumn","smdColumn","photoColumn","questionRow","metaRow","questionArray","question","metaIndex","questionType","options","values","includes","Rank","q","Question","Type","Sort","sortQuestionByType","Options","Index","lastQuestion","respondants","responseArray","Photo","rankedOptions","optionIndexBegin","rankOption","optionIndex","rankIndex","formatRankOption","compileRankedOptions","survey","groupQuestionResponses","surveyResponse","Text","attribute","order","Option","Choice","findLastName","fullName","matches","match","sort","rankedComment","rankOrdered","rankOutput","photo","formattedCandidate","answer","orderFlag","group","validateAnswer","defaultAswer","find","_response","appendToMap","propName","value","items","get","set","debounce","ms","timeoutId","args","clearTimeout","isConnected","maybeElement","cleanupElements","key","stencilSubscription","getRenderingRef","elmsToUpdate","Map","dispose","clear","elm","elements","forceUpdate","reset","elms","unwrap","val","createObservableMap","defaultState","shouldUpdate","unwrappedState","states","entries","handlers","_a","cb","oldValue","state","Proxy","[object Object]","from","enumerable","configurable","has","eventName","callback","removeFromArray","onChange","unSet","newValue","unReset","use","subscriptions","unsubs","subscription","unsub","array","item","createStore","log","filterName","getFilterBookmark","url","search","searchParams","URLSearchParams","setFilterBookmark","history","pushState","getShuffleComparisons","alpha","beta","sortShuffle","orderResp","shuffle"],"mappings":"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","sourcesContent":["/* @license\nPapa Parse\nv5.3.2\nhttps://github.com/mholt/PapaParse\nLicense: MIT\n*/\n!function(e,t){\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&\"undefined\"!=typeof exports?module.exports=t():e.Papa=t()}(this,function s(){\"use strict\";var f=\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:void 0!==f?f:{};var n=!f.document&&!!f.postMessage,o=n&&/blob:/i.test((f.location||{}).protocol),a={},h=0,b={parse:function(e,t){var i=(t=t||{}).dynamicTyping||!1;M(i)&&(t.dynamicTypingFunction=i,i={});if(t.dynamicTyping=i,t.transform=!!M(t.transform)&&t.transform,t.worker&&b.WORKERS_SUPPORTED){var r=function(){if(!b.WORKERS_SUPPORTED)return!1;var e=(i=f.URL||f.webkitURL||null,r=s.toString(),b.BLOB_URL||(b.BLOB_URL=i.createObjectURL(new Blob([\"(\",r,\")();\"],{type:\"text/javascript\"})))),t=new f.Worker(e);var i,r;return t.onmessage=_,t.id=h++,a[t.id]=t}();return r.userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=M(t.step),t.chunk=M(t.chunk),t.complete=M(t.complete),t.error=M(t.error),delete t.worker,void r.postMessage({input:e,config:t,workerId:r.id})}var n=null;b.NODE_STREAM_INPUT,\"string\"==typeof e?n=t.download?new l(t):new p(t):!0===e.readable&&M(e.read)&&M(e.on)?n=new g(t):(f.File&&e instanceof File||e instanceof Object)&&(n=new c(t));return n.stream(e)},unparse:function(e,t){var n=!1,_=!0,m=\",\",y=\"\\r\\n\",s='\"',a=s+s,i=!1,r=null,o=!1;!function(){if(\"object\"!=typeof t)return;\"string\"!=typeof t.delimiter||b.BAD_DELIMITERS.filter(function(e){return-1!==t.delimiter.indexOf(e)}).length||(m=t.delimiter);(\"boolean\"==typeof t.quotes||\"function\"==typeof t.quotes||Array.isArray(t.quotes))&&(n=t.quotes);\"boolean\"!=typeof t.skipEmptyLines&&\"string\"!=typeof t.skipEmptyLines||(i=t.skipEmptyLines);\"string\"==typeof t.newline&&(y=t.newline);\"string\"==typeof t.quoteChar&&(s=t.quoteChar);\"boolean\"==typeof t.header&&(_=t.header);if(Array.isArray(t.columns)){if(0===t.columns.length)throw new Error(\"Option columns is empty\");r=t.columns}void 0!==t.escapeChar&&(a=t.escapeChar+s);(\"boolean\"==typeof t.escapeFormulae||t.escapeFormulae instanceof RegExp)&&(o=t.escapeFormulae instanceof RegExp?t.escapeFormulae:/^[=+\\-@\\t\\r].*$/)}();var h=new RegExp(j(s),\"g\");\"string\"==typeof e&&(e=JSON.parse(e));if(Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return u(null,e,i);if(\"object\"==typeof e[0])return u(r||Object.keys(e[0]),e,i)}else if(\"object\"==typeof e)return\"string\"==typeof e.data&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||r),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:\"object\"==typeof e.data[0]?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||\"object\"==typeof e.data[0]||(e.data=[e.data])),u(e.fields||[],e.data||[],i);throw new Error(\"Unable to serialize unrecognized input\");function u(e,t,i){var r=\"\";\"string\"==typeof e&&(e=JSON.parse(e)),\"string\"==typeof t&&(t=JSON.parse(t));var n=Array.isArray(e)&&0<e.length,s=!Array.isArray(t[0]);if(n&&_){for(var a=0;a<e.length;a++)0<a&&(r+=m),r+=v(e[a],a);0<t.length&&(r+=y)}for(var o=0;o<t.length;o++){var h=n?e.length:t[o].length,u=!1,f=n?0===Object.keys(t[o]).length:0===t[o].length;if(i&&!n&&(u=\"greedy\"===i?\"\"===t[o].join(\"\").trim():1===t[o].length&&0===t[o][0].length),\"greedy\"===i&&n){for(var d=[],l=0;l<h;l++){var c=s?e[l]:l;d.push(t[o][c])}u=\"\"===d.join(\"\").trim()}if(!u){for(var p=0;p<h;p++){0<p&&!f&&(r+=m);var g=n&&s?e[p]:p;r+=v(t[o][g],p)}o<t.length-1&&(!i||0<h&&!f)&&(r+=y)}}return r}function v(e,t){if(null==e)return\"\";if(e.constructor===Date)return JSON.stringify(e).slice(1,25);var i=!1;o&&\"string\"==typeof e&&o.test(e)&&(e=\"'\"+e,i=!0);var r=e.toString().replace(h,a);return(i=i||!0===n||\"function\"==typeof n&&n(e,t)||Array.isArray(n)&&n[t]||function(e,t){for(var i=0;i<t.length;i++)if(-1<e.indexOf(t[i]))return!0;return!1}(r,b.BAD_DELIMITERS)||-1<r.indexOf(m)||\" \"===r.charAt(0)||\" \"===r.charAt(r.length-1))?s+r+s:r}}};if(b.RECORD_SEP=String.fromCharCode(30),b.UNIT_SEP=String.fromCharCode(31),b.BYTE_ORDER_MARK=\"\\ufeff\",b.BAD_DELIMITERS=[\"\\r\",\"\\n\",'\"',b.BYTE_ORDER_MARK],b.WORKERS_SUPPORTED=!n&&!!f.Worker,b.NODE_STREAM_INPUT=1,b.LocalChunkSize=10485760,b.RemoteChunkSize=5242880,b.DefaultDelimiter=\",\",b.Parser=E,b.ParserHandle=i,b.NetworkStreamer=l,b.FileStreamer=c,b.StringStreamer=p,b.ReadableStreamStreamer=g,f.jQuery){var d=f.jQuery;d.fn.parse=function(o){var i=o.config||{},h=[];return this.each(function(e){if(!(\"INPUT\"===d(this).prop(\"tagName\").toUpperCase()&&\"file\"===d(this).attr(\"type\").toLowerCase()&&f.FileReader)||!this.files||0===this.files.length)return!0;for(var t=0;t<this.files.length;t++)h.push({file:this.files[t],inputElem:this,instanceConfig:d.extend({},i)})}),e(),this;function e(){if(0!==h.length){var e,t,i,r,n=h[0];if(M(o.before)){var s=o.before(n.file,n.inputElem);if(\"object\"==typeof s){if(\"abort\"===s.action)return e=\"AbortError\",t=n.file,i=n.inputElem,r=s.reason,void(M(o.error)&&o.error({name:e},t,i,r));if(\"skip\"===s.action)return void u();\"object\"==typeof s.config&&(n.instanceConfig=d.extend(n.instanceConfig,s.config))}else if(\"skip\"===s)return void u()}var a=n.instanceConfig.complete;n.instanceConfig.complete=function(e){M(a)&&a(e,n.file,n.inputElem),u()},b.parse(n.file,n.instanceConfig)}else M(o.complete)&&o.complete()}function u(){h.splice(0,1),e()}}}function u(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine=\"\",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var t=w(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null);this._handle=new i(t),(this._handle.streamer=this)._config=t}.call(this,e),this.parseChunk=function(e,t){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var i=this._config.beforeFirstChunk(e);void 0!==i&&(e=i)}this.isFirstChunk=!1,this._halted=!1;var r=this._partialLine+e;this._partialLine=\"\";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var s=n.meta.cursor;this._finished||(this._partialLine=r.substring(s-this._baseIndex),this._baseIndex=s),n&&n.data&&(this._rowCount+=n.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(o)f.postMessage({results:n,workerId:b.WORKER_ID,finished:a});else if(M(this._config.chunk)&&!t){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);n=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!a||!M(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),a||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(e){M(this._config.error)?this._config.error(e):o&&this._config.error&&f.postMessage({workerId:b.WORKER_ID,error:e,finished:!1})}}function l(e){var r;(e=e||{}).chunkSize||(e.chunkSize=b.RemoteChunkSize),u.call(this,e),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(r=new XMLHttpRequest,this._config.withCredentials&&(r.withCredentials=this._config.withCredentials),n||(r.onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)),r.open(this._config.downloadRequestBody?\"POST\":\"GET\",this._input,!n),this._config.downloadRequestHeaders){var e=this._config.downloadRequestHeaders;for(var t in e)r.setRequestHeader(t,e[t])}if(this._config.chunkSize){var i=this._start+this._config.chunkSize-1;r.setRequestHeader(\"Range\",\"bytes=\"+this._start+\"-\"+i)}try{r.send(this._config.downloadRequestBody)}catch(e){this._chunkError(e.message)}n&&0===r.status&&this._chunkError()}},this._chunkLoaded=function(){4===r.readyState&&(r.status<200||400<=r.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:r.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(e){var t=e.getResponseHeader(\"Content-Range\");if(null===t)return-1;return parseInt(t.substring(t.lastIndexOf(\"/\")+1))}(r),this.parseChunk(r.responseText)))},this._chunkError=function(e){var t=r.statusText||e;this._sendError(new Error(t))}}function c(e){var r,n;(e=e||{}).chunkSize||(e.chunkSize=b.LocalChunkSize),u.call(this,e);var s=\"undefined\"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,s?((r=new FileReader).onload=v(this._chunkLoaded,this),r.onerror=v(this._chunkError,this)):r=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var t=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,t)}var i=r.readAsText(e,this._config.encoding);s||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(r.error)}}function p(e){var i;u.call(this,e=e||{}),this.stream=function(e){return i=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e,t=this._config.chunkSize;return t?(e=i.substring(0,t),i=i.substring(t)):(e=i,i=\"\"),this._finished=!i,this.parseChunk(e)}}}function g(e){u.call(this,e=e||{});var t=[],i=!0,r=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(e){this._input=e,this._input.on(\"data\",this._streamData),this._input.on(\"end\",this._streamEnd),this._input.on(\"error\",this._streamError)},this._checkIsFinished=function(){r&&1===t.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=v(function(e){try{t.push(\"string\"==typeof e?e:e.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(e){this._streamError(e)}},this),this._streamError=v(function(e){this._streamCleanUp(),this._sendError(e)},this),this._streamEnd=v(function(){this._streamCleanUp(),r=!0,this._streamData(\"\")},this),this._streamCleanUp=v(function(){this._input.removeListener(\"data\",this._streamData),this._input.removeListener(\"end\",this._streamEnd),this._input.removeListener(\"error\",this._streamError)},this)}function i(m){var a,o,h,r=Math.pow(2,53),n=-r,s=/^\\s*-?(\\d+\\.?|\\.\\d+|\\d+\\.\\d+)([eE][-+]?\\d+)?\\s*$/,u=/^(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d\\.\\d+([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))|(\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d([+-][0-2]\\d:[0-5]\\d|Z))$/,t=this,i=0,f=0,d=!1,e=!1,l=[],c={data:[],errors:[],meta:{}};if(M(m.step)){var p=m.step;m.step=function(e){if(c=e,_())g();else{if(g(),0===c.data.length)return;i+=e.data.length,m.preview&&i>m.preview?o.abort():(c.data=c.data[0],p(c,t))}}}function y(e){return\"greedy\"===m.skipEmptyLines?\"\"===e.join(\"\").trim():1===e.length&&0===e[0].length}function g(){return c&&h&&(k(\"Delimiter\",\"UndetectableDelimiter\",\"Unable to auto-detect delimiting character; defaulted to '\"+b.DefaultDelimiter+\"'\"),h=!1),m.skipEmptyLines&&(c.data=c.data.filter(function(e){return!y(e)})),_()&&function(){if(!c)return;function e(e,t){M(m.transformHeader)&&(e=m.transformHeader(e,t)),l.push(e)}if(Array.isArray(c.data[0])){for(var t=0;_()&&t<c.data.length;t++)c.data[t].forEach(e);c.data.splice(0,1)}else c.data.forEach(e)}(),function(){if(!c||!m.header&&!m.dynamicTyping&&!m.transform)return c;function e(e,t){var i,r=m.header?{}:[];for(i=0;i<e.length;i++){var n=i,s=e[i];m.header&&(n=i>=l.length?\"__parsed_extra\":l[i]),m.transform&&(s=m.transform(s,n)),s=v(n,s),\"__parsed_extra\"===n?(r[n]=r[n]||[],r[n].push(s)):r[n]=s}return m.header&&(i>l.length?k(\"FieldMismatch\",\"TooManyFields\",\"Too many fields: expected \"+l.length+\" fields but parsed \"+i,f+t):i<l.length&&k(\"FieldMismatch\",\"TooFewFields\",\"Too few fields: expected \"+l.length+\" fields but parsed \"+i,f+t)),r}var t=1;!c.data.length||Array.isArray(c.data[0])?(c.data=c.data.map(e),t=c.data.length):c.data=e(c.data,0);m.header&&c.meta&&(c.meta.fields=l);return f+=t,c}()}function _(){return m.header&&0===l.length}function v(e,t){return i=e,m.dynamicTypingFunction&&void 0===m.dynamicTyping[i]&&(m.dynamicTyping[i]=m.dynamicTypingFunction(i)),!0===(m.dynamicTyping[i]||m.dynamicTyping)?\"true\"===t||\"TRUE\"===t||\"false\"!==t&&\"FALSE\"!==t&&(function(e){if(s.test(e)){var t=parseFloat(e);if(n<t&&t<r)return!0}return!1}(t)?parseFloat(t):u.test(t)?new Date(t):\"\"===t?null:t):t;var i}function k(e,t,i,r){var n={type:e,code:t,message:i};void 0!==r&&(n.row=r),c.errors.push(n)}this.parse=function(e,t,i){var r=m.quoteChar||'\"';if(m.newline||(m.newline=function(e,t){e=e.substring(0,1048576);var i=new RegExp(j(t)+\"([^]*?)\"+j(t),\"gm\"),r=(e=e.replace(i,\"\")).split(\"\\r\"),n=e.split(\"\\n\"),s=1<n.length&&n[0].length<r[0].length;if(1===r.length||s)return\"\\n\";for(var a=0,o=0;o<r.length;o++)\"\\n\"===r[o][0]&&a++;return a>=r.length/2?\"\\r\\n\":\"\\r\"}(e,r)),h=!1,m.delimiter)M(m.delimiter)&&(m.delimiter=m.delimiter(e),c.meta.delimiter=m.delimiter);else{var n=function(e,t,i,r,n){var s,a,o,h;n=n||[\",\",\"\\t\",\"|\",\";\",b.RECORD_SEP,b.UNIT_SEP];for(var u=0;u<n.length;u++){var f=n[u],d=0,l=0,c=0;o=void 0;for(var p=new E({comments:r,delimiter:f,newline:t,preview:10}).parse(e),g=0;g<p.data.length;g++)if(i&&y(p.data[g]))c++;else{var _=p.data[g].length;l+=_,void 0!==o?0<_&&(d+=Math.abs(_-o),o=_):o=_}0<p.data.length&&(l/=p.data.length-c),(void 0===a||d<=a)&&(void 0===h||h<l)&&1.99<l&&(a=d,s=f,h=l)}return{successful:!!(m.delimiter=s),bestDelimiter:s}}(e,m.newline,m.skipEmptyLines,m.comments,m.delimitersToGuess);n.successful?m.delimiter=n.bestDelimiter:(h=!0,m.delimiter=b.DefaultDelimiter),c.meta.delimiter=m.delimiter}var s=w(m);return m.preview&&m.header&&s.preview++,a=e,o=new E(s),c=o.parse(a,t,i),g(),d?{meta:{paused:!0}}:c||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,o.abort(),a=M(m.chunk)?\"\":a.substring(o.getCharIndex())},this.resume=function(){t.streamer._halted?(d=!1,t.streamer.parseChunk(a,!0)):setTimeout(t.resume,3)},this.aborted=function(){return e},this.abort=function(){e=!0,o.abort(),c.meta.aborted=!0,M(m.complete)&&m.complete(c),a=\"\"}}function j(e){return e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\")}function E(e){var S,O=(e=e||{}).delimiter,x=e.newline,I=e.comments,T=e.step,D=e.preview,A=e.fastMode,L=S=void 0===e.quoteChar||null===e.quoteChar?'\"':e.quoteChar;if(void 0!==e.escapeChar&&(L=e.escapeChar),(\"string\"!=typeof O||-1<b.BAD_DELIMITERS.indexOf(O))&&(O=\",\"),I===O)throw new Error(\"Comment character same as delimiter\");!0===I?I=\"#\":(\"string\"!=typeof I||-1<b.BAD_DELIMITERS.indexOf(I))&&(I=!1),\"\\n\"!==x&&\"\\r\"!==x&&\"\\r\\n\"!==x&&(x=\"\\n\");var F=0,z=!1;this.parse=function(r,t,i){if(\"string\"!=typeof r)throw new Error(\"Input must be a string\");var n=r.length,e=O.length,s=x.length,a=I.length,o=M(T),h=[],u=[],f=[],d=F=0;if(!r)return C();if(A||!1!==A&&-1===r.indexOf(S)){for(var l=r.split(x),c=0;c<l.length;c++){if(f=l[c],F+=f.length,c!==l.length-1)F+=x.length;else if(i)return C();if(!I||f.substring(0,a)!==I){if(o){if(h=[],k(f.split(O)),R(),z)return C()}else k(f.split(O));if(D&&D<=c)return h=h.slice(0,D),C(!0)}}return C()}for(var p=r.indexOf(O,F),g=r.indexOf(x,F),_=new RegExp(j(L)+j(S),\"g\"),m=r.indexOf(S,F);;)if(r[F]!==S)if(I&&0===f.length&&r.substring(F,F+a)===I){if(-1===g)return C();F=g+s,g=r.indexOf(x,F),p=r.indexOf(O,F)}else if(-1!==p&&(p<g||-1===g))f.push(r.substring(F,p)),F=p+e,p=r.indexOf(O,F);else{if(-1===g)break;if(f.push(r.substring(F,g)),w(g+s),o&&(R(),z))return C();if(D&&h.length>=D)return C(!0)}else for(m=F,F++;;){if(-1===(m=r.indexOf(S,m+1)))return i||u.push({type:\"Quotes\",code:\"MissingQuotes\",message:\"Quoted field unterminated\",row:h.length,index:F}),E();if(m===n-1)return E(r.substring(F,m).replace(_,S));if(S!==L||r[m+1]!==L){if(S===L||0===m||r[m-1]!==L){-1!==p&&p<m+1&&(p=r.indexOf(O,m+1)),-1!==g&&g<m+1&&(g=r.indexOf(x,m+1));var y=b(-1===g?p:Math.min(p,g));if(r.substr(m+1+y,e)===O){f.push(r.substring(F,m).replace(_,S)),r[F=m+1+y+e]!==S&&(m=r.indexOf(S,F)),p=r.indexOf(O,F),g=r.indexOf(x,F);break}var v=b(g);if(r.substring(m+1+v,m+1+v+s)===x){if(f.push(r.substring(F,m).replace(_,S)),w(m+1+v+s),p=r.indexOf(O,F),m=r.indexOf(S,F),o&&(R(),z))return C();if(D&&h.length>=D)return C(!0);break}u.push({type:\"Quotes\",code:\"InvalidQuotes\",message:\"Trailing quote on quoted field is malformed\",row:h.length,index:F}),m++}}else m++}return E();function k(e){h.push(e),d=F}function b(e){var t=0;if(-1!==e){var i=r.substring(m+1,e);i&&\"\"===i.trim()&&(t=i.length)}return t}function E(e){return i||(void 0===e&&(e=r.substring(F)),f.push(e),F=n,k(f),o&&R()),C()}function w(e){F=e,k(f),f=[],g=r.indexOf(x,F)}function C(e){return{data:h,errors:u,meta:{delimiter:O,linebreak:x,aborted:z,truncated:!!e,cursor:d+(t||0)}}}function R(){T(C()),h=[],u=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return F}}function _(e){var t=e.data,i=a[t.workerId],r=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){r=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:y,resume:y};if(M(i.userStep)){for(var s=0;s<t.results.data.length&&(i.userStep({data:t.results.data[s],errors:t.results.errors,meta:t.results.meta},n),!r);s++);delete t.results}else M(i.userChunk)&&(i.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!r&&m(t.workerId,t.results)}function m(e,t){var i=a[e];M(i.userComplete)&&i.userComplete(t),i.terminate(),delete a[e]}function y(){throw new Error(\"Not implemented.\")}function w(e){if(\"object\"!=typeof e||null===e)return e;var t=Array.isArray(e)?[]:{};for(var i in e)t[i]=w(e[i]);return t}function v(e,t){return function(){e.apply(t,arguments)}}function M(e){return\"function\"==typeof e}return o&&(f.onmessage=function(e){var t=e.data;void 0===b.WORKER_ID&&t&&(b.WORKER_ID=t.workerId);if(\"string\"==typeof t.input)f.postMessage({workerId:b.WORKER_ID,results:b.parse(t.input,t.config),finished:!0});else if(f.File&&t.input instanceof File||t.input instanceof Object){var i=b.parse(t.input,t.config);i&&f.postMessage({workerId:b.WORKER_ID,results:i,finished:!0})}}),(l.prototype=Object.create(u.prototype)).constructor=l,(c.prototype=Object.create(u.prototype)).constructor=c,(p.prototype=Object.create(p.prototype)).constructor=p,(g.prototype=Object.create(u.prototype)).constructor=g,b});","// Parse responses\nimport * as Papa from 'papaparse';\n\nexport enum ISurveyQuestionType {\n  Text = 'Open-Ended Response',\n  Choice = 'Response',\n  Rank = 'Rank',\n  Option = 'Option'\n}\nexport interface ISurveyQuestion {\n  Question: string;\n  Type: ISurveyQuestionType\n  Options?: Array<string>\n  Sort?: Array<ISurveySort> // sort option on responses\n  Index?: string // Spreadsheet column/row index\n}\nexport interface ISurveySort {\n  order:string\n  attribute: string\n}\n\nexport interface ISurveyCandidate {\n  Photo: string;\n  Candidate: string;\n  Race?: string;\n  Website?: string\n  // Answers based on Question as a key\n  [index: string]: string;\n}\n// TODO Change these to ISurveyQuestionAggregation + ISurveyResponse below\nexport interface ISurveyResponse {\n  question: ISurveyQuestion;\n  responses: Array<ISurveySummary>;\n}\n\nexport interface ISurveySummary {\n  response: string\n  candidates: Array<ISurveyCandidate>\n}\n\n// Get candidates from DC BOEE list\nexport async function fetchCandidates(filename:string):Promise<any> {\n  const file = await fetch(filename);\n  const responseText = await file.text();\n  const parseConfig = {\n    header: true\n  }\n\n  const parseFile = Papa.parse(responseText, parseConfig);\n  const parseData = parseFile.data;\n\n  // parseFile.meta.fields\n  const response = parseData.reduce((candidateIndex, candidate) => {\n\n    if(candidateIndex[candidate['Race']] === undefined) {\n      candidateIndex[candidate['Race']] = {\n        race: candidate['Race'],\n        candidates: []\n      }\n    }\n    candidateIndex[candidate['Race']].candidates.push({\n      Race: candidate['Race'],\n      Candidate: candidate['Name'],\n      Website: candidate['Website']\n    })\n    return candidateIndex;\n\n  }, {});\n  return response;\n}\n// Get survey and return array of responses and candidates\nexport async function fetchResponses(filename: string, format: string = \"column\"): Promise<Array<ISurveyResponse>> { \n  if(filename === null) {\n    return [];\n  }\n  const candidatesFile = await fetch(filename);\n  const candidatesText = await candidatesFile.text();\n  try {\n    \n    const responses = parseResponse(candidatesText, format);\n    return responses;  \n  } catch (error) {\n    console.error(\"Error parsing file: \", {filename, error})\n    console.error(\"test\", candidatesText)\n  }\n}\n\n// \nfunction parseResponse(responseText: string, format: string = \"column\"): Array<ISurveyResponse> {\n\n  // TODO: make parse configuration a Prop option\n  const parseConfig = {\n    header: (format !== \"surveymonkey\")\n  }\n\n  const parseFile = Papa.parse(responseText, parseConfig);\n  const parseData = parseFile.data;\n  // console.debug(\"parseData\", parseData);\n\n  if (parseData[0][0] === \"Respondent ID\") {\n    // Default SurveyMoneky output\n      return parseSurveyMonkeyQuestions(parseFile, parseData);\n  } else if(parseFile.meta.fields && parseFile.meta.fields[0] === \"Photo\") {\n    return parseColumnQuestions(parseFile, parseData);\n  } else if (parseFile.meta.fields && parseFile.meta.fields[0] === \"Question\") {\n    return parseRowQuestions(parseFile, parseData);\n  } else {\n    console.debug(\"dc-election parseResponse: Unrecognized file type\", {parseFile})\n    throw \"dc-election parseResponse: Unrecognized file type\";\n  }\n\n\n}\n\n// For responses files that are direct export from SurveyMonkey\n// Row 1: Respondent ID,Collector ID,Start Date,End Date,IP Address,Email Address,First Name,Last Name,Custom Data 1,Contact information,,,,Select the Advisory Neighborhood Commission in which you are running:,Select the SMD in which you are running:,\"Please upload a photo of yourself, preferably a headshot, that GGWash has your permission to use in its materials related to the 2022 election and endorsements process in DC, which may include publication on our website, in emails, on social media, or in other formats.\",\"Where in your Advisory Neighborhood Commission, not just your SMD, do you think density should be increased to accommodate the construction of new housing?If you do not think density should be increased in your ANC, please write, \"\"I do not think density should be increased in my ANC.”\",\"The District’s inclusionary zoning law “requires that eight to 10 percent of the residential floor area be set-aside for affordable units in most new residential development projects of 10 or more units.” The cost of doing so is paid by a project’s developer. Because the number of IZ units is tied to floor-area ratio, the larger a building is, the more IZ units will be built. Conversely, if the initial density proposed by a developer is reduced during the approvals process, rather than maintained or increased, fewer IZ units will be built. ANC commissioners are likely to hear from some constituents concerned by a project’s potential impact—real or assumed—on traffic, parking, views, and property values and rents, and whether it fits the character of the neighborhood. While it is not a guarantee that a development proposal including IZ units will come before your ANC, if one does, what would you do, given the likelihood of at least some pushback?\",\"Planned unit developments are projects in which developers are able to exceed the height and density allowed by the District’s zoning code up to the density allowed by its Future Land Use Map (typically a modest increase in scale) in exchange for a community benefits agreement. While it is not a guarantee that a PUD will be proposed in your ANC, if one is, the commission is likely to be the party negotiating that community benefits agreement with a developer.The following are examples of benefits that an ANC might push for in such an agreement. Please rank them in the order in which you would prioritize them. If you would not consider a particular benefit at all, please select N/A in that row.\",,,,,,,,Should apartments be legal to build District-wide?,Which of these statements best describes your feelings about historic districts and landmarks in the District?,\"The District is likely to begin a rewrite of its Comprehensive Plan, its foundational land-use document, in 2025. In a rewrite of the Comprehensive Plan, which of these three options would be your top priority?\",Which statement do you agree with most? ,\"My ANC, not just my SMD, has:\",\"Do you think there are not enough cars, enough cars, or too many cars in the District?\",Do you think inducing residents and visitors to drive less should be an explicit policy goal of the District?,\"On-street parking occurs in public space. This means that an on-street parking spot does not belong to a specific individual, and people park in different places at different times. What do you consider a reasonable rule of thumb for deciding if a neighborhood has enough street parking?\",\"Do you support the projects in the bus priority plan in your ANC and, if necessary, would you support removing parking or travel lanes so that they can be built?\",\"Do you support the projects in the bicycle priority network plan in your ANC, and, if necessary, would you support removing parking or travel lanes so that they can be built?\",\"If there are projects in either plan in your ANC, choose one—bus or bike—and discuss what you see as its benefits, weaknesses, or both. If there are no projects in your ANC, please write, “N/A.”\",\"The District's goal to be carbon-free by 2050 requires most of the reduction of its transportation emissions to come from residents turning existing single-occupancy vehicle trips into transit, walking, and biking trips. Please describe at least one trip you currently take by car (even if you, yourself, are not driving) that you can commit to taking on foot, by bus, by train, via a mobility device, or by bike instead.\",\"First, what do you feel is the biggest issue in your neighborhood, and what is your position on it? Second, given the limited scope of commissioners’ and commissions’ authority, what would you, most realistically, do about that issue if you are elected?\",,Why do you think you are the right person to serve as an ANC commissioner for your SMD?\n// Row 2: ,,,,,,,,,Name,Email,Campaign-related social media accounts,\"Fundraising link, if applicable (if not, please write \"\"N/A\"\")\",Response,Response,Open-Ended Response,Open-Ended Response,Response,More inclusionary zoning units than are required by District law,Inclusionary zoning units restricted to lower income levels than initially proposed by the developer,Inclusionary zoning units with more than one bedroom,\"Parks, landscaping, and/or public art\",A Capital Bikeshare station,\"Improvements or repairs to, or replacement of, streets and sidewalks\",\"Direct cash payments to local organizations, such as civic associations and ANCs\",Direct cash payments to local schools and youth programs,Response,Response,Response,Response,Response,Response,Response,Response,Response,Response,Open-Ended Response,Open-Ended Response,\"I feel the biggest issue in my neighborhood is, and my position on it is:\",\"If elected, I would:\",Open-Ended Response\nfunction parseSurveyMonkeyQuestions( _parseFile: any, parseData: any ):Array<ISurveyResponse> {\n  let questions:Array<ISurveyQuestion> = [];\n\n  //// \n  // indexes for working with spreadsheet\n  const questionColumnStart = 8;\n  const responseRowStart = 2;\n  const idColumn = 0;\n  const nameColumn = 1;\n  const websiteColumn = 3;\n  const ancColumn = 5; // TODO fix this hard-coding of the schema\n  const smdColumn = 6;\n  const photoColumn = 7;\n  \n  // Row 1 is questions, Row 2 is question metadata\n  const questionRow = 0;\n  const metaRow = 1;\n  ///\n\n  // Get array of structured questions\n  questions = parseData[questionRow].slice(questionColumnStart).reduce((questionArray, question, index) => {\n    const metaIndex = index + questionColumnStart;\n    let questionType = parseData[metaRow][metaIndex];\n    let options = [];\n\n    // Store the question, or add the Option to the previous Rank type question\n    if(question && question.length !== 0) {\n\n      // If this is a unique string it's a rank choice option\n      if(! Object.values(ISurveyQuestionType).includes(questionType)) {\n        // If second row has text it is a ranking option. Save this to the options and set the type to Rank\n        options.push(questionType);\n        questionType = ISurveyQuestionType.Rank;\n      }\n\n      let q = {\n        Question: question, \n        Type: questionType,\n        Sort: sortQuestionByType(questionType),\n        Options: options,\n        Index: metaIndex\n      };\n      \n      questionArray.push(q)\n    } else {\n      // Rank question option. Add to array of previous question\n      const lastQuestion = questionArray[questionArray.length-1];\n      lastQuestion.Options.push(questionType)\n    }\n\n    return questionArray;\n  }, []);\n\n  // console.debug(\"questions\", questions)\n  \n  // Now get candidates and their responses\n  const respondants = parseData.slice(responseRowStart).reduce((responseArray, response) =>  {\n    let candidate:ISurveyCandidate = {\n      Candidate: response[nameColumn],\n      Photo: `2022/${response[idColumn]}_${response[photoColumn]}`,\n      Race: response[ancColumn] + response[smdColumn],\n      Website: response[websiteColumn]\n    }\n    // console.debug({candidate})\n    responseArray.push(candidate);\n    questions.map((question) => {\n      \n      if (question.Type === ISurveyQuestionType.Rank) {\n        // for Rank questions, build array of answers as CSV string: \"1|#option,2|#option,3|#option\"\n        let rankedOptions = [];\n        \n        // loop through options until next question\n        // \n        const optionIndexBegin:number = +question.Index;\n        question.Options.map((rankOption, optionIndex) => {\n          const rankIndex = response[optionIndex+optionIndexBegin];\n          \n          rankOption = formatRankOption(rankOption, \"would not prioritize\", rankIndex.toString(), true)\n          rankedOptions.push(rankOption);\n        })\n        \n        candidate[question.Question] = compileRankedOptions(rankedOptions);\n      } else {\n        candidate[question.Question] = response[question.Index];\n      }\n      \n    });\n\n    return responseArray;\n  }, []);\n\n  // TODO: determine if can be optimized to not double loop array\n  const survey:Array<ISurveyResponse> = questions.map((question) => {\n    const responses = groupQuestionResponses(question.Question, respondants);\n    const surveyResponse:ISurveyResponse = { question, responses };\n    return surveyResponse;\n  })\n\n  return survey;\n}\n\n// Determines sort attribute + order of responses by type\nfunction sortQuestionByType(questionType:string): Array<ISurveySort> {\n  switch(questionType) {\n    case ISurveyQuestionType.Text:\n      return [{attribute: 'Race', order: 'asc'}, {attribute: 'Candidate', order: 'asc'}];\n    case ISurveyQuestionType.Rank:\n      return [{attribute: 'Race', order: 'asc'}, {attribute: 'Candidate', order: 'asc'}];\n    case ISurveyQuestionType.Option:\n    case ISurveyQuestionType.Choice:\n    default: \n      return [{attribute: 'response', order: 'asc'}, {attribute: 'Race', order: 'asc'}, {attribute: 'Candidate', order: 'asc'}];\n  }\n\n}\n\n// For responses files that have questions as columns and candidates in Rows\nfunction parseColumnQuestions( parseFile: any, parseData: any ):Array<ISurveyResponse> {\n\n  // console.log(\"parseFile\", [parseFile, parseFile.meta.fields]);\n  // console.log(\"parseData\", [parseData, parseData]);\n  let questions:Array<ISurveyResponse> = [];\n\n  // Skip first three columns: Photo, Candidate, Race\n  questions = parseFile.meta.fields.slice(3).map((question) => {\n    const responses = groupQuestionResponses(question, parseData);\n\n    return { question: { \n      Question: question, \n      Type: ISurveyQuestionType.Choice,\n      Sort: sortQuestionByType(ISurveyQuestionType.Choice)\n    }, responses }\n  })\n  return questions;\n}\n\n// return the last name, but ignore suffix (Sr, III)\n// Only works for last names with at least 4 characters\nfunction findLastName(fullName:string):string {\n  const matches = fullName.match(/\\w+(?!.*[\\w]{4,})/);\n  return !!matches ? matches[0] : '';\n}\n\nfunction compileRankedOptions(rankedOptions:Array<string>) {\n  return rankedOptions.sort().map((s)=> {return s.replace(/^.*\\|/,'')}).join('|');\n}\n\nfunction formatRankOption(rankOption:string, rankedComment:string, rankIndex:string, rankOrdered:boolean):string {\n  let rankOutput = \"\";\n  // Candidate said they did not agree with this option\n  if(rankIndex === '0' || rankIndex === '' || rankIndex === 'N/A') {\n    rankOutput = `~${rankOption}~ (${rankedComment})`; \n    rankIndex = '1000';\n  } else if(rankOrdered) {\n    // the list should include numbers: 3|#option\n    rankOutput = `${rankIndex}|#${rankOption}`;\n  } else {\n    rankOutput = `${rankIndex}|${rankOption}`;\n  }\n\n  return rankOutput;\n}\n\n// For responses files that have questions as rows and candidates in Columns\nfunction parseRowQuestions(parseFile: any, parseData: any ):Array<ISurveyResponse> {\n\n  // console.log(\"parseRowQuestions: [parseFile, parseData]\", [parseFile, parseData]);\n  // Question #, Type, Question, Sub question, ...[candidate last names]\n  const candidates = parseFile.meta.fields.slice(3).map((candidate) => {\n    // TODO: fix default candidate race from at-large to a candidate directory?\n    let photo = findLastName(candidate);\n    let formattedCandidate = {Candidate: candidate, Photo: `${photo}.jpg`, Race: 'At-Large'};\n\n    // RANKED OPTIONS\n    // Flag if currently gathering Rank options\n    let rankedOptions = [];\n    let rankedComment = null; // will be used from sub-question on rank question\n    let rankOrdered = false; // determine if the options were 'ordered' like 1,2,3.. or just chosen from list\n    // ---\n\n    // Each row is a question (or sub-question)\n    // Add the question + their response to the candidate index\n    parseData.map((row) => {\n      const question = row['Question'];\n      let answer:string = null; // we'll build the answer depending on type\n\n      // If the question is ranked-choice, gather respondants answers in order\n      // TODO: move this into a function\n      if(row['Type'] === ISurveyQuestionType.Rank) {\n        rankedOptions = [];\n        let orderFlag = null;\n        // value like 'would not vote for|unordered'\n        [rankedComment,orderFlag] = row['Sub question'].split('|');\n        rankOrdered = !!orderFlag && orderFlag === 'ordered';\n\n      } else if (row['Type'] === ISurveyQuestionType.Option) {\n        // The candidate cell (question row/candidate column) will have a number 0-Number options\n        // if 0, consider lowest ranked and mark \"will not pursue\" with a tilde ~\n        let rankIndex = row[candidate];\n        let rankOption = row['Sub question'];\n\n        rankOption = formatRankOption(rankOption, rankedComment, rankIndex, rankOrdered);\n        \n        // If the option was not selected\n        if(!!rankOption) {\n          // Add index and then sort\n          rankedOptions.push(rankOption)\n        }\n        // serialize the answer in case this is the last option\n        // remove the number prefix, e.g. '4|My Answer' -> 'My Answer'\n        answer = compileRankedOptions(rankedOptions);\n      } else {\n        // done processing\n        answer = row[candidate];\n      }\n\n      // Don't save the response unless there is an answer\n      if(!!answer) {\n        // console.debug(\"response: parse answers\", answer);\n        formattedCandidate[question] = answer;\n      }\n    })\n\n    return formattedCandidate;\n  })\n\n  // Loop back over the questions and group\n  const questions:Array<ISurveyResponse> = parseData.filter((question) => {\n    // We aggregated Rank + Options, so keep out of summary\n    return question.Type !== ISurveyQuestionType.Option; \n  }).map((question) => {\n    // Don't group rank/options\n    const group = question.Type === ISurveyQuestionType.Rank ? false : true;\n    const responses = groupQuestionResponses(question.Question, candidates, group);\n\n    \n    question.Sort = sortQuestionByType(question.Type);\n    return { question, responses }\n  });\n\n  // console.log(\"parseRowQuestions: {candidates}\", {candidates, questions})\n\n  return questions;\n}\n\n/** Always returns a valid answer\n* if empty response, return 'No Response'\n*/ \nfunction validateAnswer( answer:string, defaultAswer:string = \"No Response\" ): string {\n  if(!answer || answer.length === 0) {\n    return defaultAswer;\n  }\n    \n  return answer;\n}\n// Create an index of responses to set of candidates\nfunction groupQuestionResponses(question:string, candidates: Array<ISurveyCandidate>, group: boolean = true): Array<ISurveySummary> {\n  const responses = [];\n\n  // console.log(\"groupQuestionResponses: candidates\", {question, candidates})\n  // For each candidate, lookup their response to a question,\n  // then add to the groups responses\n  candidates.map((candidate) => {\n\n    // Lookup the candidate's answer to a given question\n    const answer = validateAnswer( candidate[question] );\n    let response = null;\n    \n    // Find out if other candidates have provided this answer\n    if(group) {\n      response = responses.find((_response) => { return _response.response === answer });\n    }\n\n    // Add the response to the set if it doesn't exist yet.\n    if(!response) {\n      const length = responses.push( { response:answer, candidates: [ ] } )\n      response = responses[length-1];\n    }\n\n    // Add this candidate to the cohort of responses\n    response.candidates.push( candidate );\n  })\n  // console.debug(\"groupQuestionResponses\", {question, responses, candidates})\n\n  return responses;\n}","import { getRenderingRef, forceUpdate } from '@stencil/core';\n\nconst appendToMap = (map, propName, value) => {\n    const items = map.get(propName);\n    if (!items) {\n        map.set(propName, [value]);\n    }\n    else if (!items.includes(value)) {\n        items.push(value);\n    }\n};\nconst debounce = (fn, ms) => {\n    let timeoutId;\n    return (...args) => {\n        if (timeoutId) {\n            clearTimeout(timeoutId);\n        }\n        timeoutId = setTimeout(() => {\n            timeoutId = 0;\n            fn(...args);\n        }, ms);\n    };\n};\n\n/**\n * Check if a possible element isConnected.\n * The property might not be there, so we check for it.\n *\n * We want it to return true if isConnected is not a property,\n * otherwise we would remove these elements and would not update.\n *\n * Better leak in Edge than to be useless.\n */\nconst isConnected = (maybeElement) => !('isConnected' in maybeElement) || maybeElement.isConnected;\nconst cleanupElements = debounce((map) => {\n    for (let key of map.keys()) {\n        map.set(key, map.get(key).filter(isConnected));\n    }\n}, 2000);\nconst stencilSubscription = () => {\n    if (typeof getRenderingRef !== 'function') {\n        // If we are not in a stencil project, we do nothing.\n        // This function is not really exported by @stencil/core.\n        return {};\n    }\n    const elmsToUpdate = new Map();\n    return {\n        dispose: () => elmsToUpdate.clear(),\n        get: (propName) => {\n            const elm = getRenderingRef();\n            if (elm) {\n                appendToMap(elmsToUpdate, propName, elm);\n            }\n        },\n        set: (propName) => {\n            const elements = elmsToUpdate.get(propName);\n            if (elements) {\n                elmsToUpdate.set(propName, elements.filter(forceUpdate));\n            }\n            cleanupElements(elmsToUpdate);\n        },\n        reset: () => {\n            elmsToUpdate.forEach((elms) => elms.forEach(forceUpdate));\n            cleanupElements(elmsToUpdate);\n        },\n    };\n};\n\nconst unwrap = (val) => (typeof val === 'function' ? val() : val);\nconst createObservableMap = (defaultState, shouldUpdate = (a, b) => a !== b) => {\n    const unwrappedState = unwrap(defaultState);\n    let states = new Map(Object.entries(unwrappedState !== null && unwrappedState !== void 0 ? unwrappedState : {}));\n    const handlers = {\n        dispose: [],\n        get: [],\n        set: [],\n        reset: [],\n    };\n    const reset = () => {\n        var _a;\n        // When resetting the state, the default state may be a function - unwrap it to invoke it.\n        // otherwise, the state won't be properly reset\n        states = new Map(Object.entries((_a = unwrap(defaultState)) !== null && _a !== void 0 ? _a : {}));\n        handlers.reset.forEach((cb) => cb());\n    };\n    const dispose = () => {\n        // Call first dispose as resetting the state would\n        // cause less updates ;)\n        handlers.dispose.forEach((cb) => cb());\n        reset();\n    };\n    const get = (propName) => {\n        handlers.get.forEach((cb) => cb(propName));\n        return states.get(propName);\n    };\n    const set = (propName, value) => {\n        const oldValue = states.get(propName);\n        if (shouldUpdate(value, oldValue, propName)) {\n            states.set(propName, value);\n            handlers.set.forEach((cb) => cb(propName, value, oldValue));\n        }\n    };\n    const state = (typeof Proxy === 'undefined'\n        ? {}\n        : new Proxy(unwrappedState, {\n            get(_, propName) {\n                return get(propName);\n            },\n            ownKeys(_) {\n                return Array.from(states.keys());\n            },\n            getOwnPropertyDescriptor() {\n                return {\n                    enumerable: true,\n                    configurable: true,\n                };\n            },\n            has(_, propName) {\n                return states.has(propName);\n            },\n            set(_, propName, value) {\n                set(propName, value);\n                return true;\n            },\n        }));\n    const on = (eventName, callback) => {\n        handlers[eventName].push(callback);\n        return () => {\n            removeFromArray(handlers[eventName], callback);\n        };\n    };\n    const onChange = (propName, cb) => {\n        const unSet = on('set', (key, newValue) => {\n            if (key === propName) {\n                cb(newValue);\n            }\n        });\n        // We need to unwrap the defaultState because it might be a function.\n        // Otherwise we might not be sending the right reset value.\n        const unReset = on('reset', () => cb(unwrap(defaultState)[propName]));\n        return () => {\n            unSet();\n            unReset();\n        };\n    };\n    const use = (...subscriptions) => {\n        const unsubs = subscriptions.reduce((unsubs, subscription) => {\n            if (subscription.set) {\n                unsubs.push(on('set', subscription.set));\n            }\n            if (subscription.get) {\n                unsubs.push(on('get', subscription.get));\n            }\n            if (subscription.reset) {\n                unsubs.push(on('reset', subscription.reset));\n            }\n            if (subscription.dispose) {\n                unsubs.push(on('dispose', subscription.dispose));\n            }\n            return unsubs;\n        }, []);\n        return () => unsubs.forEach((unsub) => unsub());\n    };\n    const forceUpdate = (key) => {\n        const oldValue = states.get(key);\n        handlers.set.forEach((cb) => cb(key, oldValue, oldValue));\n    };\n    return {\n        state,\n        get,\n        set,\n        on,\n        onChange,\n        use,\n        dispose,\n        reset,\n        forceUpdate,\n    };\n};\nconst removeFromArray = (array, item) => {\n    const index = array.indexOf(item);\n    if (index >= 0) {\n        array[index] = array[array.length - 1];\n        array.length--;\n    }\n};\n\nconst createStore = (defaultState, shouldUpdate) => {\n    const map = createObservableMap(defaultState, shouldUpdate);\n    map.use(stencilSubscription());\n    return map;\n};\n\nexport { createObservableMap, createStore };\n","import { createStore } from \"@stencil/store\";\n\n// DOC: https://stenciljs.com/docs/stencil-store\n\nconst { state, onChange } = createStore({\n  filter: ''\n});\n\nonChange('filter', value => {\n  // state.filter = value ** 2;\n  console.log(\"store: filter changed: \", value)\n});\n\nexport default state;","import { ISurveySort } from \"./response\";\n\nconst filterName = \"location-filter\";\n\n// Get current window bookmark\nexport function getFilterBookmark() {\n  let filter = \"\";\n  var url = window?.location?.search;\n  \n  let searchParams = new URLSearchParams(url);\n\n  // console.debug(\"getFilterBookmark\", {url, value: searchParams.get(filterName), searchParams})\n\n  if(searchParams.has(filterName)) {\n    filter = searchParams.get(filterName)\n  }\n  return filter;\n  // window.location.search = searchParams;\n}\n\nexport function setFilterBookmark(filter: string) {\n  // window.location.search = `?filter=${filter}`;\n  if(!!filter && filter.length !== 0) {\n    //@ts-ignore\n    const url = new URL(window.location);\n    url.searchParams.set(filterName, filter);\n    window.history.pushState({}, '', url);  \n  }\n\n}\n\n// Fisher-Yates (Knuth) array shuffle from http://sedition.com/perl/javascript-fy.html\nexport function randomShuffle(array: Array<any>): Array<any> {\n  let currentIndex = array.length,  randomIndex;\n\n  // While there remain elements to shuffle.\n  while (currentIndex != 0) {\n\n    // Pick a remaining element.\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex--;\n\n    // And swap it with the current element.\n    [array[currentIndex], array[randomIndex]] = [\n      array[randomIndex], array[currentIndex]];\n  }\n\n  return array;\n}\n\nfunction getShuffleComparisons(a, b, attribute): Array<any> {\n\n    let alpha = a[attribute];\n    let beta = b[attribute];\n    if(alpha === undefined && a['candidates'] && a['candidates'][0] && a['candidates'][0][attribute] !== undefined ) {\n      alpha = a['candidates'][0][attribute];\n      beta = b['candidates'][0][attribute];\n    }\n\n    return [alpha, beta]\n} \nexport function sortShuffle(array: Array<any>, sort:Array<ISurveySort>): Array<any> {\n  \n  return array.sort((a, b) => {\n    // console.debug(\"sortShuffle\", {a, b, attribute, order})\n    // For the ternary below we want to use order to create a boolean\n    let orderResp = sort[0].order === \"asc\" ? 1 : -1;\n    let attribute = sort[0].attribute;\n    \n    let [alpha, beta] = getShuffleComparisons(a,b, attribute)\n    let index = 1;\n\n    // iterate through \n    while(alpha === beta && sort[index] !== undefined) {\n      orderResp = sort[index].order === \"asc\" ? 1 : -1;\n      attribute = sort[index].attribute;\n      [alpha, beta] = getShuffleComparisons(a,b, attribute)\n      index++;\n    }\n    // console.debug(`compare: [${alpha > beta}]`, {a, b, alpha, beta, attribute, sort})\n    \n    return alpha > beta ? orderResp : -orderResp;\n  })\n}\n\n// TODO: add option for what type of shuffle: sort | random, and attribute\nexport function shuffle(array: Array<any>, sort:Array<ISurveySort>): Array<any> {\n  // console.debug(\"shuffle\", array);\n  const response = sortShuffle(array, sort);\n  return response;\n}"]}