import{r as e,h as o,H as t}from"./p-2aa67f1c.js";import{I as n}from"./p-df5ba4fc.js";function s(e,o,t){return function(e,o="Race",t="asc"){const n="asc"===t?1:-1;return e.sort(((e,t)=>e[o]>t[o]?n:-n))}(e,o,t)}const i=class{constructor(o){e(this,o),this.question=null,this.showNoResponse=!1,this.type=n.Choice,this.responses=[]}renderCandidates(e){return s(e,"Race").map((e=>o("dc-election-candidate",{photo:e.Photo,fullname:e.Candidate,office:e.Race})))}renderResponse(e,t=2){if("No Response"!==e.response){let i=e.response.replace(/^[0-9]\.\s+/,""),r="narrow";switch(this.type){case n.Choice:return r=t>3?"narrow":"grid",o("div",{class:"response-gallery"},o("dc-election-gallery",{appearance:r,candidates:s(e.candidates,"Race")},o("div",{class:"response"},i)));case n.Text:return o("div",{class:"response-quote"},o("dc-election-gallery",{appearance:r,candidates:s(e.candidates,"Race")}),o("div",{class:"response"},i));case n.Rank:case n.Option:const a=i.split("|");return i=o("ol",{class:"rank-options"},a.map((e=>this.formatRankOptions(e)))),o("div",{class:"response-rank"},o("dc-election-gallery",{appearance:r,candidates:s(e.candidates,"Race")}),o("div",{class:"response"},i))}}else if(this.showNoResponse){const t=e.candidates.map((e=>null==e?void 0:e.Candidate));return o("div",{class:"footnote"},"No response from ",s(t).join(", "))}}formatRankOptions(e){const t=!!e.match(/\~([\w\s,-]+)\~/g);return e=e.replace(/\~([\w\s,-]+)\~/g,"$1"),o("li",{class:t?"omit":"ranked"},o("span",null,e))}renderQuestion(e){let t=e.Question.replace(/_(.*)_/g,'<span class="preface">$1</span>');return o("div",{class:"question",innerHTML:t})}render(){return console.debug("dc-election-question",{question:this.question,responses:this.responses}),o(t,null,o("slot",null),this.renderQuestion(this.question),o("div",{class:`layout-${this.type.toLowerCase()}`},s(this.responses,"response","asc").map((e=>this.renderResponse(e,this.responses.length)))))}};i.style=':host{display:block;border-top:thin solid #444;margin-bottom:2em}.preface{font-weight:300;font-size:1em;display:block;margin-bottom:0.3em}.question{font-weight:800;font-size:1.2em;padding-top:0.5em}.response{font-weight:600;font-size:1em;padding:1em 0}.response-gallery .response::before{content:"\\203A"}.footnote{font-weight:300px;font-size:0.8em;font-style:italic;padding-top:0.5em}.layout-choice{display:grid;grid-gap:0.3em;grid-template-columns:repeat( auto-fit, minmax(400px, 1fr) )}.layout-choice .response{padding:0 0.3em 0.3em 0.3em;vertical-align:bottom}.response-gallery{margin-top:1em;padding-top:0.5em}.response-quote,.response-rank{display:grid;grid-template-columns:0.1fr 1fr;padding:1em 0;border-bottom:thin solid #DDD}.response-rank .response{font-weight:300;padding:0}.response-quote .response{font-weight:400;font-size:1em;padding:0.4em;font-style:oblique;quotes:"\\201C""\\201D""\\2018""\\2019"}.response-quote .response:before{content:open-quote;color:#ccc;font-size:3em;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em}.response-quote .response:after{content:close-quote;color:#ccc;font-size:3em;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em}.rank-options{padding:0;margin:0;font:italic 1em Georgia;color:#666}.rank-options li{border:1px solid #CCC;padding:0.5em;margin-left:1.5em;margin-bottom:0.5em}.rank-options li.omit{list-style:none}.ranked span{font:normal 1em Arial;color:#000}.omit{font:normal 1em Arial;text-decoration:line-through;color:#555}.omit::after{display:inline-block;text-decoration:unset;content:"would not vote for";font-weight:100;padding-left:0.5em;font-style:italic}';export{i as dc_election_question}