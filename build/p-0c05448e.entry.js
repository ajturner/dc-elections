import{r as e,h as o,H as t}from"./p-2aa67f1c.js";import{I as n}from"./p-9ee83041.js";function s(e,o,t){return function(e,o="Race",t="asc"){const n="asc"===t?1:-1;return e.sort(((e,t)=>e[o]>t[o]?n:-n))}(e,o,t)}const i=class{constructor(o){e(this,o),this.question=null,this.showNoResponse=!1,this.type=n.Choice,this.responses=[]}renderCandidates(e){return s(e,"Race").map((e=>o("dc-election-candidate",{photo:e.Photo,fullname:e.Candidate,office:e.Race})))}renderResponse(e,t=2){if("No Response"!==e.response){let t=e.response.replace(/^[0-9]\.\s+/,""),i="grid";switch(this.type){case n.Choice:return o("div",{class:"response-gallery"},o("dc-election-gallery",{appearance:i,candidates:s(e.candidates,"Race")},o("div",{class:"response"},t)));case n.Text:return i="quote",o("div",{class:"response-quote"},o("dc-election-gallery",{appearance:i,candidates:s(e.candidates,"Race")}),o("div",{class:"response"},t));case n.Rank:case n.Option:i="quote";const a=t.split("|");return t=o("ol",{class:"rank-options"},a.map((e=>this.formatRankOptions(e)))),o("div",{class:"response-rank"},o("dc-election-gallery",{appearance:i,candidates:s(e.candidates,"Race")}),o("div",{class:"response"},t))}}else if(this.showNoResponse){const t=e.candidates.map((e=>null==e?void 0:e.Candidate));return o("div",{class:"footnote"},"No response from ",s(t).join(", "))}}formatRankOptions(e){let t="unranked";switch(!0){case/\~(.*)\~/g.test(e):t="omit";break;case/^#/.test(e):t="ranked",e=e.replace(/^#/,"")}return e=e.replace(/\~(.*)\~ (\([\w\s]+\))/g,"<span class='text'>$1</span> <span class='comment'>$2</span>"),o("li",{class:t,innerHTML:e=`<span>${e}</span>`})}renderQuestion(e){let t="",n=e.Question;try{[,t,n]=e.Question.match(/_(.*)_(.*)/)}catch(e){}return[o("span",{class:"preface"},t),o("span",{class:"focus"},n)]}render(){return o(t,null,o("slot",null),this.renderQuestion(this.question),o("div",{class:`layout-${this.type.toLowerCase()}`},s(this.responses,"response","asc").map((e=>this.renderResponse(e,this.responses.length)))))}};i.style=':host{display:block;border-top:thin solid #444;margin-bottom:2em;padding-top:10px}.preface{font-weight:300;font-size:1em;display:block}.focus{font-weight:800;font-size:1.2em;padding-top:0.3em;padding-bottom:0.5em;position:sticky;background-color:white;opacity:0.9;top:0px;display:block}.response{font-weight:600;font-size:1em;padding:1em 0;margin-top:0.5em}.response-gallery .response::before{content:"\\203A"}.footnote{font-weight:300px;font-size:0.8em;font-style:italic;padding-top:0.5em}.layout-choice{display:grid;grid-gap:0.3em;grid-template-columns:repeat( auto-fit, minmax(400px, 1fr) )}.layout-choice .response{padding:0 0.3em 0.3em 0.3em;vertical-align:bottom}.response-gallery{padding-top:0.5em}.response-quote,.response-rank{display:grid;grid-template-columns:0.1fr 1fr;padding:1em 0;border-bottom:thin solid #DDD}.response-rank .response{font-weight:300;padding:0}.response-quote .response{font-weight:400;font-size:1em;padding:0.4em;font-style:oblique;quotes:"\\201C""\\201D""\\2018""\\2019"}.response-quote .response:before{content:open-quote;color:#ccc;font-size:3em;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em}.response-quote .response:after{content:close-quote;color:#ccc;font-size:3em;line-height:0.1em;margin-right:0.25em;vertical-align:-0.4em}.rank-options{padding:0;margin:0;font:italic 1em Georgia;color:#666}.rank-options li{border:1px solid #CCC;padding:0.5em;margin-left:1.5em;margin-bottom:0.5em}.rank-options .ranked{border:1px solid #0f9535}.rank-options li.omit,.rank-options li.unranked{list-style:none}.rank-options span{font:normal 1em Arial;color:#000}.omit .text{font:normal 1em Arial;text-decoration:line-through;color:#555}.omit .comment{display:inline-block;text-decoration:unset;font-weight:100;padding-left:0.5em;font-style:italic}';export{i as dc_election_question}